## HW6 - Знакомство с Terraform

$ terraform -v
Terraform v0.12.8

Создание директории terraform внутри проекта infra. Внутри директории terraform создан главный конфигурационный файл, что содержит декларативное описание инфраструктуры: main.tf.

Чтобы не коммитить в репозиторий служебные файлы и директории создан файл .gitignore.

Определены следующие секции в файле main.tf:

- Provider - позволит Terraform управлять ресурсами GCP через API вызовы

- resource - добавлен ресурс для создания инстанса VM в GCP

- boot_disk - в определении загрузочного диска для VM, передаем имя семейства образа(base-образ)

- allow - открыт порт для приложения

- source_ranges - каким адресам разрешен доступ

- target_tags - для каких  инстансов применимо правило с перечисленными тэгами

- tags - добавлен тег в определении ресурса

- provisioner - вызываются в момент создания/удаления ресурса и позволяют выполнять команды на удаленной или локальной машине. 
                 Их используют для запуска инструментов управления конфигурацией или начальной настройки системы.


Планирование изменения и просмотр, что terraform собирается изменить относительно известного предыдущего состояния:

$ terraform plan

Применение:

$ terraform apply

Apply complete! Resources: 1 added, 0 changed, 0 destroyed

Результатом выполнения команды также будет создание файла terraform.tfstate в директории terraform. Terraform хранит в этом файле 
состояние управляемых им ресурсов.

Добавлен SSH ключ для пользователя appuser, с помощью метаданных инстанса через определение в main.tf внутри описание инстанса.

Обьявление vars:

- выходная переменная (output variable) - в отдельном файле outputs.tf

- входные переменные (input vars) - чтобы использовать входную переменную ее нужно сначала определить в отдельном файле variables.tf

- определение переменных используя специальный файл terraform.tfvars, из которого тераформ загружает значения автоматически при каждом  запуске

Отформатировать все конфигурационные файлы:

$ terraform fmt

